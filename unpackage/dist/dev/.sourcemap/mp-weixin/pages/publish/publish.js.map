{"version":3,"sources":["webpack:///F:/saikekanglun/wecenter/main.js","webpack:///F:/saikekanglun/wecenter/pages/publish/publish.vue?c317","webpack:///F:/saikekanglun/wecenter/pages/publish/publish.vue?6118","webpack:///F:/saikekanglun/wecenter/pages/publish/publish.vue?2d1f","webpack:///F:/saikekanglun/wecenter/pages/publish/publish.vue?4806","webpack:///F:/saikekanglun/wecenter/pages/publish/publish.vue"],"names":["createPage","Page","computed","data","textareaHeight","NavigationBarTitle","post_anonymous","type","category_list","category","category_idx","multiIndex","attach_access_key","isRotate","AddTopicModal","SelectTopic","topic_name","column_list","columns","column_idx","showTopicList","create_topic","recent_topics","search_topic","searchTopicName","onLoad","e","userInfo","hasLogin","uid","uni","navigateTo","url","setNavigationBarTitle","title","onShow","intPublish","onNavigationBarButtonTap","that","editData","$refs","edit","submit","console","log","JSON","stringify","editItems","methods","searchTopic","detail","value","util","errorToast","q","limit","$api","then","res","search_topic_data","rsm","topic_data","length","i","push","name","catch","err","MultiChange","multiArray","delTopics","index","splice","showTopicLists","showAddTopic","selectTopic","currentTarget","dataset","indexOf","concat","addTopic","setTimeout","toBack","delta","navigateBack","toHome","reLaunch","AnonymousChange","linechange","lineCount","textareaAInput","cursor","CategoryChange","ColumnChange","column_name","intCategory","intColumn","access_token","intPublishQuestion","question_category_list","intPublishArticle","article_category_list","toLogin","success","fail","complete","formSubmit","content","category_id","id","topics","question_content","question_detail","anonymous","publish_question","question_id","message","column_id","publish_article","article_id"],"mappings":"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","file":"pages/publish/publish.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/publish/publish.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./publish.vue?vue&type=template&id=4035a44e&name=publish&\"\nimport script from \"./publish.vue?vue&type=script&lang=js&\"\nexport * from \"./publish.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('4035a44e', component.options)\n    } else {\n      api.reload('4035a44e', component.options)\n    }\n    module.hot.accept(\"./publish.vue?vue&type=template&id=4035a44e&name=publish&\", function () {\n      api.rerender('4035a44e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"F:/saikekanglun/wecenter/pages/publish/publish.vue\"\nexport default component.exports","export * from \"-!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./publish.vue?vue&type=template&id=4035a44e&name=publish&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.recent_topics, function(item, index) {\n    var g0 = _vm.SelectTopic.indexOf(item)\n    return {\n      $orig: _vm.__get_orig(item),\n      g0: g0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./publish.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!C:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./publish.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState } from 'vuex'; \t\nimport util from '@/utils/util.js';\nexport default {\n\tcomputed: {  \n\t\t...mapState(['userInfo','hasLogin','system_config'])  \n\t},\n\tdata() {\n\t\treturn {\n\t\t\ttextareaHeight:100,\n\t\t\tNavigationBarTitle:'',\n\t\t\tpost_anonymous:false,\n\t\t\ttype:'question',\n\t\t\tcategory_list:[],\n\t\t\tcategory:[],\n\t\t\tcategory_idx:-1,\n\t\t\tmultiIndex:0,\n\t\t\tattach_access_key:'',\n\t\t\tisRotate:false,\n\t\t\tAddTopicModal:false,\n\t\t\tSelectTopic:[],\n\t\t\ttopic_name:'',\n\t\t\tcolumn_list:[],\n\t\t\tcolumns:[],\n\t\t\tcolumn_idx:-1,\n\t\t\tshowTopicList:false,\n\t\t\tcreate_topic:null,\n\t\t\trecent_topics:[],\n\t\t\tsearch_topic:[],\n\t\t\tsearchTopicName:''\n\t\t}\n\t},\n\tonLoad:function(e){\n\t\tvar userInfo = this.userInfo\n\t\tvar hasLogin = this.hasLogin\n\t\tif(!userInfo.uid || userInfo.uid < 1 && !hasLogin){\n\t\t\tuni.navigateTo({\n\t\t\t\turl:'/pages/account/login'\n\t\t\t})\n\t\t\treturn false;\n\t\t}\n\t\tvar type = e.type\n\t\tvar NavigationBarTitle = '发起提问'\n\t\tif(type == 'question'){\n\t\t\tNavigationBarTitle = '发起问题'\n\t\t\tthis.type = type\n\t\t}else if(type == 'article'){\n\t\t\tNavigationBarTitle = '发表文章'\n\t\t\tthis.type = type\n\t\t}\n\t\tuni.setNavigationBarTitle({\n\t\t\ttitle:NavigationBarTitle\n\t\t})\n\t\t// this.intPublish()\n\t\t\n\t},\n\tonShow:function(){\n\t\tthis.intPublish()\n\t},\n\tonNavigationBarButtonTap: function(e) {\n\t\tvar that = this;  \n\t\t//子组件的data\n\t\tvar editData = this.$refs.edit.submit(); \n\t\t\n\t\tconsole.log(\"内容为\" + JSON.stringify(editData.editItems));\n\t},\n\tmethods: {\t\n\t\tsearchTopic(e){\n\t\t\tconsole.log(\"searchTopicName\" , e);\n\t\t\tvar searchTopicName = e.detail.value.searchTopicName\n\t\t\tconsole.log(\"searchTopicName\" , searchTopicName);\n\t\t\tif(!searchTopicName){\n\t\t\t\tutil.errorToast('搜索内容不能为空')\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.searchTopicName = searchTopicName\n\t\t\tvar data = []\n\t\t\tdata.type = 'topics'\n\t\t\tdata.q = searchTopicName\n\t\t\tdata.limit = 10\n\t\t\t\n\t\t\tthis.$api.search_topic(data).then(res => {\n\t\t\t\tconsole.log('search_topic',res);\n\t\t\t\tvar search_topic_data = res.data.rsm.topic_data\n\t\t\t\tif(search_topic_data.length > 0){\n\t\t\t\t\tvar search_topic = []\n\t\t\t\t\tfor (let i = 0; i < search_topic_data.length; i++) {\n\t\t\t\t\t\tsearch_topic.push(search_topic_data[i].name)\n\t\t\t\t\t}\n\t\t\t\t\tthis.search_topic = search_topic\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tutil.errorToast('未找到相关话题')\n\t\t\t\t}\n\n\t\t\t}).catch(err => {\n\t\t\t\tconsole.log('搜索话题失败',err);\n\t\t\t})\t\t\t\t\t\n\t\t},\n\t\tMultiChange(e) {\n\t\t\tthis.multiIndex = e.detail.value\n\t\t\tconsole.log('multiArray',this.multiArray)\n\t\t},\n\t\tdelTopics(index){\n\t\t\tif(index > -1){\n\t\t\t\tconsole.log('删除话题'+index,this.SelectTopic[index])\n\t\t\t\tvar SelectTopic = this.SelectTopic\n\t\t\t\tSelectTopic.splice(index, 1);\n\t\t\t\tthis.SelectTopic = SelectTopic\n\t\t\t}\n\t\t},\n\t\tshowTopicLists(){\n\t\t\tthis.showTopicList = !this.showTopicList\n\t\t},\n\t\tshowAddTopic(){\n\t\t\tconsole.log('showAddTopic')\n\t\t\tthis.AddTopicModal = !this.AddTopicModal\n\t\t},\n\t\tselectTopic(e){\n\t\t\tconsole.log('selectTopic',e)\n\t\t\t\n\t\t\tvar topic_name = e.currentTarget.dataset.topic_name\n\t\t\tif(!topic_name || topic_name == ''){\n\t\t\t\tutil.errorToast('话题有误，请重新选择')\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.SelectTopic.indexOf(topic_name) != -1){\n\t\t\t\tutil.errorToast('该话题已经添加过了')\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.SelectTopic = this.SelectTopic.concat(topic_name)\n\t\t\t\n\t\t\t\n\t\t},\n\t\taddTopic(e){\n\t\t\tconsole.log('addTopic',e.detail.value)\n\t\t\tvar topic_name = e.detail.value.topic_name\n\t\t\tif(!topic_name || topic_name == ''){\n\t\t\t\tutil.errorToast('话题名称不能为空')\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(!create_topic){\n\t\t\t\tutil.errorToast('你所在用户组无权新增话题')\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(this.SelectTopic.indexOf(topic_name) != -1){\n\t\t\t\tutil.errorToast('该话题已经添加过了')\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.SelectTopic = this.SelectTopic.concat(topic_name)\n\t\t\tsetTimeout(() => { \n\t\t\t\tthis.topic_name = '' \n\t\t\t}, 10)\t\n\t\t\tthis.topic_name = ' ' \n\t\t\tthis.showAddTopic()\n\t\t},\n\t\ttoBack(delta){\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta:1\n\t\t\t})\n\t\t},\n\t\ttoHome(){\n\t\t\tuni.reLaunch({\n\t\t\t\turl:'/pages/index/index'\n\t\t\t})\t\t\t\t\t\n\t\t},\n\t\tAnonymousChange(e) {\n\t\t\tthis.post_anonymous = e.detail.value\n\t\t},\t\t\t\t\t\n\t\tlinechange(e){\n\t\t\tvar lineCount = e.detail.lineCount\n\t\t\tif(lineCount > 4){\n\t\t\t\t//粗略的设置一下高度而已，没有参考值\n\t\t\t\tthis.textareaHeight = lineCount * 20\t\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.textareaHeight = 100\n\t\t\t}\n\t\t},\n\t\ttextareaAInput(e){\n\t\t\tconsole.log('已输入字数：',e.detail.cursor)\n\t\t},\n\t\tCategoryChange(e) {\n\t\t\tconsole.log('已选择分类：',e.detail.value)\n\t\t\tif(e.detail.value > -1){\n\t\t\t\tthis.category_idx = e.detail.value\n\t\t\t\tconsole.log('已选择分类标题：',this.category_list[e.detail.value].title)\n\t\t\t}\n\t\t},\t\n\t\tColumnChange(e) {\n\t\t\tconsole.log('已选择专栏：',e.detail.value)\n\t\t\tif(e.detail.value > -1){\n\t\t\t\tthis.column_idx = e.detail.value\n\t\t\t\tconsole.log('已选择专栏标题：',this.column_list[e.detail.value].column_name)\n\t\t\t}\n\t\t},\t\n\t\tintCategory(category_list){\n\t\t\tvar category = []\n\t\t\tfor(let index in category_list) {  \n\t\t\t\tcategory[index] = category_list[index].title\n\n\t\t\t}; \n\t\t\treturn category;\n\n\t\t},\n\t\tintColumn(column_list){\n\t\t\tvar columns = []\n\t\t\tfor(let index in column_list) {  \n\t\t\t\tcolumns[index] = column_list[index].column_name\n\n\t\t\t}; \n\t\t\treturn columns;\n\n\t\t},\t\t\t\n\t\t//初始化发布\n\t\tintPublish:function(){\n\t\t\tvar type = this.type\n\t\t\tvar userInfo = this.userInfo\n\t\t\tif(!userInfo.uid || userInfo.uid < 1){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:'/pages/account/login'\n\t\t\t\t})\n\t\t\t}\n\t\t\tvar data = {}\n\t\t\t\n\t\t\t\n\t\t\tdata.access_token = userInfo.access_token\t\t\t\t\n\t\t\tif(type == 'question'){\n\t\t\t\t\n\t\t\t\tthis.$api.intPublishQuestion(data).then(res => {\n\t\t\t\t\tconsole.log('初始化发布 intPublishQuestion',res);\n\t\t\t\t\tvar question_category_list = res.data.rsm.question_category_list\n\t\t\t\t\tconsole.log('question_category_list',question_category_list);\n\t\t\t\t\tif(question_category_list){\n\t\t\t\t\t\tthis.category_list = question_category_list\n\t\t\t\t\t\tthis.category = this.intCategory(question_category_list)\n\t\t\t\t\t\tthis.attach_access_key = res.data.rsm.attach_access_key\n\t\t\t\t\t}\n\t\t\t\t\tthis.create_topic = res.data.rsm.create_topic\n\t\t\t\t\tthis.recent_topics = res.data.rsm.recent_topics\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.log('初始化发布失败',err);\n\t\t\t\t})\t\n\t\t\t}else if(type == 'article'){\n\t\t\t\t\n\t\t\t\tthis.$api.intPublishArticle(data).then(res => {\n\t\t\t\t\tconsole.log('初始化发布 intPublishArticle',res);\n\t\t\t\t\tvar article_category_list = res.data.rsm.article_category_list\n\t\t\t\t\tconsole.log('article_category_list',article_category_list);\n\t\t\t\t\tif(article_category_list){\n\t\t\t\t\t\tthis.category_list = article_category_list\n\t\t\t\t\t\tthis.category = this.intCategory(article_category_list)\n\t\t\t\t\t}\n\t\t\t\t\tthis.create_topic = res.data.rsm.create_topic\n\t\t\t\t\tthis.recent_topics = res.data.rsm.recent_topics\n\t\t\t\t\tvar column_list = res.data.rsm.column_list\n\t\t\t\t\tif(column_list){\n\t\t\t\t\t\tthis.column_list = column_list\n\t\t\t\t\t\tthis.columns = this.intColumn(column_list)\n\t\t\t\t\t\tthis.attach_access_key = res.data.rsm.attach_access_key\n\t\t\t\t\t}\n\n\t\t\t\t\t\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.log('初始化发布失败',err);\n\t\t\t\t})\t\t\t\t\t\t\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.toBack()\n\t\t\t}\n\t\t\n\t\t},\t\n\t\ttoLogin(){\n\t\t\tutil.errorToast('请先登录')\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/account/login',\n\t\t\t\t\tsuccess: res => {},\n\t\t\t\t\tfail: () => {},\n\t\t\t\t\tcomplete: () => {}\n\t\t\t\t});\n\t\t\t}, 1200)\t\t\t\t\n\n\t\t},\t\t\t\t\n\t\t//提交发布\n\t\tformSubmit:function(e){\n\t\t\tthis.isRotate = true\n\t\t\tconsole.log('formSubmit',e);\t\n\n\t\t\tvar userInfo = this.userInfo\n\t\t\tif(!userInfo.uid || userInfo.uid < 1 ){\n\t\t\t\tthis.isRotate = false\n\t\t\t\tthis.toLogin()\n\t\t\t}\n\t\t\tvar type = this.type\n\t\t\tvar value = e.detail.value\n\t\t\tif(!value.title){\n\t\t\t\tutil.errorToast('标题不能为空')\n\t\t\t\tthis.isRotate = false\n\t\t\t\treturn false;\t\t\t\t\t\n\t\t\t}\t\t\t\t\t\n\t\t\t\n\t\t\tif(!value.content && type == 'article'){\n\t\t\t\tutil.errorToast('文章内容不能为空')\n\t\t\t\tthis.isRotate = false\n\t\t\t\treturn false;\t\t\t\t\t\n\t\t\t}\t\n\t\t\t\n\t\t\tvar data = {}\n\n\t\t\tif(this.category_list.length > 0 ){\n\t\t\t\tif(this.category_idx < 0){\n\t\t\t\t\tutil.errorToast('请选择分类')\n\t\t\t\t\tthis.isRotate = false\n\t\t\t\t\treturn false;\t\n\t\t\t\t}\n\t\t\t\tvar category_id = this.category_list[this.category_idx].id\n\t\t\t\tconsole.log('分类 category_id',category_id);\n\t\t\t\tdata.category_id = category_id\n\t\t\t}\t\t\t\t\t\t\t\n\n\t\t\t\n\t\t\tdata.access_token = userInfo.access_token\n\n\t\t\tif(this.SelectTopic.length > 0 ){\n\n\t\t\t\tdata.topics = JSON.stringify(this.SelectTopic)\n\t\t\t}\t\t\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif(type == 'question'){\n\t\t\t\tdata.question_content = value.title\n\t\t\t\tdata.question_detail = value.content\t\t\t\t\t\n\t\t\t\tdata.anonymous = this.post_anonymous?1:0\n\t\t\t\tdata.attach_access_key = this.attach_access_key\n\t\t\t\tthis.$api.publish_question(data).then(res => {\n\t\t\t\t\tif(!res.data.rsm){\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.toHome()\n\t\t\t\t\t\t}, 1200)\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t\tvar question_id = res.data.rsm.question_id\n\t\t\t\t\tif(question_id && question_id > 0){\n\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\turl:'/pages/question/detail?id='+question_id\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\t\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.toHome()\n\t\t\t\t\t\t}, 1300)\t\t\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tthis.isRotate = false\n\t\t\t\t\tconsole.log('发布问题失败',err);\n\t\t\t\t})\t\t\t\t\t\t\n\t\t\t\t\n\t\t\t}else if(type == 'article'){\n\t\t\t\t// data.post_hash = e.post_hash\n\t\t\t\tdata.title = value.title\n\t\t\t\tdata.message = value.content\t\t\n\t\t\t\t\t\t\t\n\t\t\t\tif(this.column_list.length > 0 ){\n\t\t\t\t\tif(this.column_idx < 0){\n\t\t\t\t\t\t//不强制选择专栏\n\t\t\t\t\t\t// util.errorToast('请选择专栏')\n\t\t\t\t\t\t// this.isRotate = false\n\t\t\t\t\t\t// return false;\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar column_id = this.column_list[this.column_idx].column_id\n\t\t\t\t\t\tconsole.log('专栏 column_id',column_id);\n\t\t\t\t\t\tdata.column_id = column_id\n\t\t\t\t\t}\n\n\t\t\t\t}\t\n\n\t\t\t\tdata.attach_access_key = this.attach_access_key\n\t\t\t\tthis.$api.publish_article(data).then(res => {\n\t\t\t\t\tif(!res.data.rsm){\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.toHome()\n\t\t\t\t\t\t}, 1200)\t\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tvar article_id = res.data.rsm.article_id\n\t\t\t\t\tif(article_id && article_id > 0){\n\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\turl:'/pages/article/detail?id='+article_id\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\t\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.toHome()\n\t\t\t\t\t\t}, 1300)\t\t\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.log('发布文章失败',err);\n\t\t\t\t})\t\t\t\t\t\t\n\t\t\t}else{\n\t\t\t\tutil.errorToast('系统出错')\n\t\t\t\treturn false;\t\t\n\t\t\t}\n\n\t\t}\t\t\t\n\t}\n}\n"],"sourceRoot":""}