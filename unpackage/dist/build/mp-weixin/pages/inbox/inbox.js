(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/inbox/inbox"],{"075e":function(t,n,e){"use strict";(function(t){e("ee7b"),e("921b");o(e("66fd"));var n=o(e("ff18"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},"40a5":function(t,n,e){"use strict";e.r(n);var o=e("718f"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,function(){return o[t]})}(i);n["default"]=a.a},"718f":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("2f62"),a=i(e("2e85"));function i(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.forEach(function(n){s(t,n,e[n])})}return t}function s(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var u={computed:r({},(0,o.mapState)(["hasLogin","userInfo","system_config"])),data:function(){return{tabArr:["我的私信","我的通知"],flag:"notifications",TabCur:0,isBack:!1,reload:!1,isLoad:!0,isLastPage:!1,listData:[],page:0,notifications_count:0}},onLoad:function(t){},onShow:function(){console.log("onShow"),this.intGetList()},onPullDownRefresh:function(){this.intGetList()},onReachBottom:function(){this.getList()},methods:r({},(0,o.mapMutations)(["login"]),{toChat:function(n){if(n<1)return this.toBack(),!1;t.navigateTo({url:"/pages/inbox/chat?dialog_id="+n})},intGetList:function(){this.reload=!0,this.page=0,this.isLastPage=!1,this.getList()},getList:function(){var n=this,e={};if(this.isLastPage)return t.stopPullDownRefresh(),this.isLoad=!0,a.default.showToast("没有更多内容了...."),!1;var o=this.page+1;e.page=o,e.flag="";var i=this.userInfo;e.access_token=i.access_token?i.access_token:"",this.$api.load_inbox(e).then(function(e){console.log("load_inbox",e),n.page=o,n.isLoad=!1;var r=e.data.rsm.list;console.log("list",r),r.length>0?(n.listData=n.reload?r:n.listData.concat(r),n.reload=!1,r.length<10&&(n.isLoad=!0,n.isLastPage=!0),i.user_info.notification_unread>0&&(n.notifications_count=i.user_info.notification_unread,t.setTabBarBadge({index:2,text:n.notifications_count.toString()}))):(n.isLoad=!0,n.isLastPage=!0,0==o&&(n.listData=[],a.default.errorToast("暂无通知消息"))),r.length<1&&(n.footerTips="暂无数据")}).catch(function(t){console.log("请求出错了，可以在这里做失败处理",t)})},toBack:function(){t.navigateBack({delta:1})},toLogin:function(){t.navigateTo({url:"/pages/account/login"})},topeople:function(n){if(!n)return!1;t.navigateTo({url:"/pages/people/people?uid="+n})},toQuestion:function(n){if(!n||n<1)return!1;t.navigateTo({url:"/pages/question/detail?id="+n})},toArticle:function(n){if(!n||n<1)return!1;t.navigateTo({url:"/pages/article/detail?id="+n})}})};n.default=u}).call(this,e("543d")["default"])},a540:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement;t._self._c},a=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return a})},ff18:function(t,n,e){"use strict";e.r(n);var o=e("a540"),a=e("40a5");for(var i in a)"default"!==i&&function(t){e.d(n,t,function(){return a[t]})}(i);var r=e("2877"),s=Object(r["a"])(a["default"],o["a"],o["b"],!1,null,null,null);n["default"]=s.exports}},[["075e","common/runtime","common/vendor"]]]);