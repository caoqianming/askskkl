<view><block wx:if="{{showTopicList}}"><block><view class="cu-bar bg-white"><view data-event-opts="{{[['tap',[['showTopicLists',['$event']]]]]}}" class="action" bindtap="__e"><text class="cuIcon-back text-gray"></text>返回内容编辑</view></view><view class="cu-bar bg-white solid-bottom margin-top-sm"><view class="action"><text class="cuIcon-titles text-blue"></text><text>已添加的话题</text></view></view><view class="bg-white margin-bottom-sm"><block wx:if="{{SelectTopic.length>0}}"><view><block wx:for="{{SelectTopic}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['delTopics',[index]]]]]}}" bindtap="__e"><text class="cu-tag round margin-sm bg-blue">{{item}}</text></text></block></view></block><block wx:else><view class="text-center padding-tb">未添加话题</view></block></view><form data-event-opts="{{[['submit',[['searchTopic',['$event']]]]]}}" bindsubmit="__e"><view class="cu-bar search bg-white margin-top-sm"><view class="search-form round"><text class="cuIcon-search"></text><input adjust-position="{{false}}" type="text" placeholder="搜索话题" confirm-type="search" name="searchTopicName"/></view><view class="action"><button class="cu-btn bg-blue shadow-blur round" formType="submit">搜索</button></view></view></form><view class="cu-bar bg-white solid-bottom margin-top-sm"><view class="action"><text class="cuIcon-titles text-blue"></text><text>{{(searchTopicName?'「'+searchTopicName+'」':'')+"相关话题"}}</text></view></view><view class="bg-white margin-bottom-sm"><block wx:if="{{search_topic.length>0}}"><view><block wx:for="{{search_topic}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-topic_name="{{item}}" data-event-opts="{{[['tap',[['selectTopic',['$event']]]]]}}" bindtap="__e"><text class="cu-tag round margin-sm">{{item}}</text></text></block><view class="text-center padding-tb">点击对应话题可以添加</view></view></block><block wx:else><view class="text-center padding-tb">未找到相关话题</view></block><block wx:if="{{create_topic}}"><view class="text-center padding-tb">如果找不到想要的话题，你可以<text data-event-opts="{{[['tap',[['showAddTopic',['$event']]]]]}}" class="padding-left-xs text-blue" bindtap="__e">新增话题</text></view></block></view><view class="cu-bar bg-white margin-top solid-bottom"><view class="action"><text class="cuIcon-titles text-blue"></text><text>最近话题</text></view></view><view class="cu-list menu-avatar"><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="cu-item"><view class="cu-avatar lg">#</view><view class="content"><view class="text-cut">{{item.$orig}}</view></view><view class="action"><button class="cu-btn sm" data-topic_name="{{item.$orig}}" data-idx="{{index}}" data-event-opts="{{[['tap',[['selectTopic',['$event']]]]]}}" bindtap="__e">{{item.g0!=-1?'已添加':'添加'}}</button></view></view></block></view><view class="{{['cu-modal',AddTopicModal?'show':'']}}"><view class="cu-dialog"><form data-event-opts="{{[['submit',[['addTopic',['$event']]]]]}}" bindsubmit="__e"><view class="cu-bar bg-white justify-end"><view class="content">添加话题</view><view data-event-opts="{{[['tap',[['showAddTopic',['$event']]]]]}}" class="action" bindtap="__e"><text class="cuIcon-close text-red"></text></view></view><view class="padding-xl"><input class="bg-white round" placeholder="请输入话题名称" name="topic_name" value="{{topic_name}}"/></view><view class="cu-bar bg-white justify-end"><view class="action"><button data-event-opts="{{[['tap',[['showAddTopic',['$event']]]]]}}" class="cu-btn line-blue text-blue" bindtap="__e">取消</button><button class="cu-btn bg-blue margin-left" formType="submit">添加</button></view></view></form></view></view><view class="padding flex flex-direction"><button data-event-opts="{{[['tap',[['showTopicLists',['$event']]]]]}}" class="cu-btn bg-blue lg" bindtap="__e">继续编辑内容</button></view></block></block><block wx:else><block><block wx:if="{{hasLogin&&userInfo.uid>0}}"><view><form data-event-opts="{{[['submit',[['formSubmit',['$event']]]]]}}" bindsubmit="__e"><view class="cu-form-group solid-bottom"><input placeholder="请输入标题" name="title"/></view><view class="cu-form-group"><textarea style="{{('height:'+textareaHeight+'px;')}}" maxlength="-1" disabled="{{modalName!=null}}" placeholder="在这里输入你的内容" name="content" data-event-opts="{{[['input',[['textareaAInput',['$event']]]]]}}" bindinput="__e"></textarea></view><block wx:if="{{type=='question'&&system_config.anonymous_enable=='Y'}}"><view class="cu-form-group"><view class="title">匿名提问</view><switch class="{{['blue',post_anonymous?'checked':'']}}" checked="{{post_anonymous?true:false}}" data-event-opts="{{[['change',[['AnonymousChange',['$event']]]]]}}" bindchange="__e"></switch></view></block><block wx:if="{{category_list.length>0}}"><view class="cu-form-group margin-top-xs"><view class="title">分类</view><picker value="{{category_idx}}" range="{{category}}" data-event-opts="{{[['change',[['CategoryChange',['$event']]]]]}}" bindchange="__e"><view class="picker">{{''+(category_idx>-1?category_list[category_idx].title:'请选择分类')+''}}</view></picker></view></block><block wx:if="{{column_list.length>0&&type=='article'}}"><view class="cu-form-group margin-top-xs"><view class="title">专栏</view><picker value="{{column_idx}}" range="{{columns}}" data-event-opts="{{[['change',[['ColumnChange',['$event']]]]]}}" bindchange="__e"><view class="picker">{{''+(column_idx>-1?column_list[column_idx].column_name:'请选择专栏')+''}}</view></picker></view></block><view data-event-opts="{{[['tap',[['showTopicLists',['$event']]]]]}}" class="cu-form-group margin-top-xs" bindtap="__e"><view class="title">{{SelectTopic.length>0?'已添加的话题':'添加话题'}}</view><view class="cuIcon-right"></view></view><view class="bg-white padding-lr"><block wx:for="{{SelectTopic}}" wx:for-item="item" wx:for-index="index" wx:key="index"><text data-event-opts="{{[['tap',[['delTopics',[index]]]]]}}" bindtap="__e"><text class="cu-tag round margin-sm bg-blue">{{item}}</text></text></block></view><view class="padding flex flex-direction"><button class="cu-btn bg-blue margin-tb-sm lg" formType="submit" disabled="{{isRotate}}" type><text class="{{[isRotate?'cuIcon-loading2 cuIconfont-spin':'']}}"></text>发布</button><button data-event-opts="{{[['tap',[['toHome',['$event']]]]]}}" class="cu-btn bg-grey lg" bindtap="__e">返回</button></view></form></view></block><block wx:else><view><page-tips vue-id="1" tipsText="请先登录" iconClass="cuIcon-lock text-gray" bind:__l="__l"></page-tips></view></block></block></block></view>