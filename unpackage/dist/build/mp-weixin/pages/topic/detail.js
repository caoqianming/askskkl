(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/topic/detail"],{"2c0f":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o("2f62"),n=a(o("2e85"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},i=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),i.forEach(function(e){c(t,e,o[e])})}return t}function c(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var r={computed:s({},(0,i.mapState)(["userInfo","hasLogin"])),data:function(){return{searchKeyword:"",tabArr:["全部","热门","推荐","话题详情"],isCard:!0,isBack:!1,isLoad:!0,listData:[],page:0,res_count:0,TabCur:0,sort_type:0,topic_id:0,topic_info:[],best_answers_users:[]}},onLoad:function(t){console.log("topic detail onLoad",t);var e=t.topic_id;this.topic_id=e,this.getTopicDetail()},onPullDownRefresh:function(){this.intGetList()},onReachBottom:function(){this.getList()},onShareAppMessage:function(t){return"button"===t.from&&console.log(t.target),{title:"这个话题有点意思，推荐你看看"}},methods:{focus_topic:function(){var t=this,e=this.userInfo,o={};o.access_token=e.access_token?e.access_token:"",o.topic_id=this.topic_id,this.$api.focus_topic(o).then(function(e){console.log("focus_topic",e);var o=e.data.rsm.type;if(!o)return n.default.errorToast("话题不存在"),!1;t.topic_info.has_focus="add"==o?1:0}).catch(function(t){console.log("请求出错了，可以在这里做失败处理",t)})},getTopicDetail:function(){var t=this;if(this.topic_id<1)return n.default.showToast("话题信息有误"),!1;var e=this.userInfo,o={};o.access_token=e.access_token?e.access_token:"",o.topic_id=this.topic_id,this.$api.getTopicDetail(o).then(function(e){console.log("getTopicDetail",e);var o=e.data.rsm;if(""==o.topic_title||!o.topic_title)return n.default.showToast("话题不存在"),!1;t.topic_info=o,t.intGetList()}).catch(function(t){console.log("请求出错了，可以在这里做失败处理",t)})},intGetList:function(){this.reload=!0,this.last_id=0,this.page=0,this.isLastPage=!1,this.getList()},getList:function(){var e=this,o={};if(this.topic_id<1)return n.default.showToast("话题信息有误"),!1;if(o.sort_type=this.sort_type,o.topic_id=this.topic_id,this.isLastPage)return t.stopPullDownRefresh(),this.isLoad=!0,n.default.showToast("没有更多内容了...."),!1;var i=this.page+1;o.page=i,this.$api.getTopicList(o).then(function(t){e.page=i,e.isLoad=!1;var o=t.data.rsm.list;o.length>0?(e.listData=e.reload?o:e.listData.concat(o),e.reload=!1,o.length<10&&(e.isLoad=!0,e.isLastPage=!0)):(e.isLoad=!0,e.isLastPage=!0,1==i&&(e.listData=[],e.res_count=0,n.default.errorToast("未找到相关内容"))),o.length<1&&(e.footerTips="暂无数据")}).catch(function(t){console.log("请求出错了，可以在这里做失败处理",t)})},toDetail:function(e){var o=e.currentTarget.dataset.topic_id;o>0?t.navigateTo({url:"detail?topic_id="+o}):n.default.showToast("话题id有误")},tabSelect:function(t){var e=t.currentTarget.dataset.id;this.TabCur=e,this.sort_type=e,console.log("切换到",this.tabArr[e]),this.intGetList()}}};e.default=r}).call(this,o("543d")["default"])},7473:function(t,e,o){"use strict";var i=o("856b"),n=o.n(i);n.a},"7afe":function(t,e,o){"use strict";(function(t){o("ee7b"),o("921b");i(o("66fd"));var e=i(o("e581"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},"856b":function(t,e,o){},bf1b:function(t,e,o){"use strict";o.r(e);var i=o("2c0f"),n=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);e["default"]=n.a},e581:function(t,e,o){"use strict";o.r(e);var i=o("f0ed"),n=o("bf1b");for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);o("7473");var s=o("2877"),c=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,null,null);e["default"]=c.exports},f0ed:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},n=[];o.d(e,"a",function(){return i}),o.d(e,"b",function(){return n})}},[["7afe","common/runtime","common/vendor"]]]);